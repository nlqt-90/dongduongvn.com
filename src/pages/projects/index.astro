---
import PageLayout from "@layouts/PageLayout.astro";
import { getCollection } from "astro:content";

// Lấy toàn bộ project từ content/projects/
const entries = await getCollection("projects");

// Sắp xếp theo thứ tự A-Z hoặc theo nhu cầu
const allProjects = entries
  .map((entry) => ({
    slug: entry.slug,
    ...entry.data
  }))
  .sort((a, b) => a.title.localeCompare(b.title));
---

<PageLayout 
  title="Dự Án đã tham gia | Đông Dương"
  pageSubtitle="An toàn - Chất lượng - Chuyên nghiệp"
  pageTitle="Các dự án đã tham gia"
>
  <link slot="head" rel="stylesheet" href="/assets/css/projects.min.css" />

<section class="projects section">
  <div class="container">
    <ul class="projects_list">
      {allProjects.map(project => (
        <li class="projects_list-item">
          <div class="media">
            <img src={project.thumbnail} alt={project.title} />
          </div>

          <div class="main">
            <h3 class="main_title">
              <span class="text">{project.title}</span>
              <span class="divider divider--line"></span>
            </h3>

            <div class="main_info">
              <span class="location">
                <i class="icon-location icon"></i>
                {project.location}
              </span>

              <a
                class="link link-arrow"
                href={`/projects/${project.slug}`}
              >
                Chi tiết <i class="icon-arrow_right icon"></i>
              </a>
            </div>
          </div>
        </li>
      ))}
    </ul>
  </div>
</section>

</PageLayout>
