# Use DecapBridge classic auth (required)
backend:
  name: git-gateway
  repo: nlqt-90/dongduongvn.com
  branch: main
  identity_url: https://auth.decapbridge.com/sites/7ce0857c-f0a9-4f04-a460-ebfb29f08867
  gateway_url: https://gateway.decapbridge.com

  # See who did what (optional)
  commit_messages:
    create: Create {{collection}} “{{slug}}” - {{author-name}} <{{author-login}}> via DecapBridge
    update: Update {{collection}} “{{slug}}” - {{author-name}} <{{author-login}}> via DecapBridge
    delete: Delete {{collection}} “{{slug}}” - {{author-name}} <{{author-login}}> via DecapBridge
    uploadMedia: Upload “{{path}}” - {{author-name}} <{{author-login}}> via DecapBridge
    deleteMedia: Delete “{{path}}” - {{author-name}} <{{author-login}}> via DecapBridge
    openAuthoring: Message {{message}} - {{author-name}} <{{author-login}}> via DecapBridge

# Better Decap + Bridge logo (optional)
logo_url: https://decapbridge.com/decapcms-with-bridge.svg

# Add site links in Decap CMS (optional)
site_url: https://giangiao.com.vn

# === Required media settings ===
media_folder: "public/uploads/originals"   # file path in repo
public_folder: "/uploads/originals"       # URL after build
# --- local_backend: true ---

slug:
  clean_accents: true

collections:
  # ===========================
  # POPUP COLLECTION
  # ===========================
  - name: "popups"
    label: "Popups"
    folder: "src/content/popups"
    create: true
    format: "frontmatter"
    extension: "md"
    slug: "{{fields.title}}"

    fields:
      - { label: "Tiêu đề", name: "title", widget: "string" }
      - { label: "Kích hoạt", name: "active", widget: "boolean", default: true }
      - { label: "Ngày bắt đầu", name: "startDate", widget: "datetime", format: "YYYY-MM-DD", time_format: false }
      - { label: "Ngày kết thúc", name: "endDate", widget: "datetime", format: "YYYY-MM-DD", time_format: false }
      - label: "Ảnh popup"
        name: "image"
        widget: "image"
        choose_url: false
        hint: "Upload ảnh (tự lưu Cloudinary)"

  # ===========================
  # PROJECT COLLECTION
  # ===========================
  - name: "projects"
    label: "Projects"
    folder: "src/content/projects"
    create: true
    format: "frontmatter"
    extension: "md"
    slug: "{{fields.title}}"

    fields:
      - { label: "Tiêu đề", name: "title", widget: "string" }
      - { label: "Địa điểm", name: "location", widget: "string" }
      - { label: "Ngày bắt đầu (YYYY-MM)", name: "startDate", widget: "string" }

      - label: "Danh mục thiết bị"
        name: "categories"
        widget: "select"
        multiple: true
        options:
          - { label: "Cẩu tháp", value: "cau-thap" }
          - { label: "Vận thăng", value: "van-thang" }
          - { label: "Giàn giáo", value: "gian-giao" }
          - { label: "Cốp pha", value: "cop-pha" }
          - { label: "Cột chống", value: "cot-chong" }
          - { label: "Tấm sàn thép", value: "tam-san-thep" }

      - { label: "Thumbnail", name: "thumbnail", widget: "image", choose_url: false }
      - { label: "Ảnh chính", name: "mainImage", widget: "image", choose_url: false }

      - label: "Mô tả dự án"
        name: "description"
        widget: "list"
        field:
          label: "Đoạn mô tả"
          name: "text"
          widget: "text"

      - label: "Thông tin thêm"
        name: "info"
        widget: "object"
        fields:
          - { label: "Địa điểm hiển thị", name: "location", widget: "string" }
          - { label: "Quy mô", name: "scope", widget: "string" }

      - label: "Gallery"
        name: "gallery"
        widget: "list"
        field:
          label: "Ảnh"
          name: "image"
          widget: "image"
          choose_url: false
