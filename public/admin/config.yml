# ===============================
# BACKEND CONFIG (DecapBridge + Git Gateway)
# ===============================
backend:
  name: git-gateway
  repo: nlqt-90/dongduongvn.com
  branch: main
  identity_url: https://auth.decapbridge.com/sites/7ce0857c-f0a9-4f04-a460-ebfb29f08867
  gateway_url: https://gateway.decapbridge.com

publish_mode: editorial_workflow

# ===============================
# MEDIA CONFIG (DÙNG 1 THƯ MỤC DUY NHẤT)
# ===============================
media_folder: "public/uploads"    # folder trong repo Git
public_folder: "/uploads"         # folder khi lên host

slug:
  clean_accents: true

# ===============================
# COLLECTIONS
# ===============================

collections:

  # ------------------------------
  # POPUPS COLLECTION
  # ------------------------------
  - name: "popups"
    label: "Popups"
    folder: "src/content/popups"
    create: true
    format: "frontmatter"
    extension: "md"
    slug: "{{fields.title}}"

    fields:
      - { label: "Tiêu đề", name: "title", widget: "string" }
      - { label: "Kích hoạt", name: "active", widget: "boolean", default: true }
      - { label: "Ngày bắt đầu", name: "startDate", widget: "datetime", format: "DD/MM/YYYY" }
      - { label: "Ngày kết thúc", name: "endDate", widget: "datetime", format: "DD/MM/YYYY" }
      - { 
          label: "Ảnh Popup", 
          name: "image", 
          widget: "image", 
          choose_url: false 
        }

  # ------------------------------
  # PROJECTS COLLECTION
  # ------------------------------
  - name: "projects"
    label: "Projects"
    folder: "src/content/projects"
    create: true
    format: "frontmatter"
    extension: "md"
    slug: "{{fields.title}}"

    fields:
      - { label: "Tiêu đề", name: "title", widget: "string" }
      - { label: "Địa điểm", name: "location", widget: "string" }
      - { label: "Ngày bắt đầu (YYYY-MM)", name: "startDate", widget: "string" }

      - label: "Danh mục thiết bị"
        name: "categories"
        widget: "select"
        multiple: true
        options:
          - { label: "Cẩu tháp", value: "cau-thap" }
          - { label: "Vận thăng", value: "van-thang" }
          - { label: "Giàn giáo", value: "gian-giao" }
          - { label: "Cốp pha", value: "cop-pha" }
          - { label: "Cột chống", value: "cot-chong" }
          - { label: "Tấm sàn thép", value: "tam-san-thep" }

      - { label: "Thumbnail", name: "thumbnail", widget: "image", choose_url: false }
      - { label: "Ảnh chính", name: "mainImage", widget: "image", choose_url: false }

      - label: "Mô tả dự án"
        name: "description"
        widget: "text"

      - label: "Thông tin thêm"
        name: "info"
        widget: "object"
        fields:
          - { label: "Địa điểm hiển thị", name: "location", widget: "string" }
          - { label: "Quy mô", name: "scope", widget: "string" }

      - label: "Gallery"
        name: "gallery"
        widget: "list"
        field:
          label: "Ảnh"
          name: "image"
          widget: "image"
          choose_url: false
